<!DOCTYPE html> 
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    /* üëá mantuve todo tu CSS igual */
    body { margin: 0; padding: 0; background: #111; font-family: Arial, sans-serif; color: white; transition: transform 0.3s ease; }
    .swiper { width: 100vw; height: 100vh; }
    .swiper-slide { display: flex; justify-content: center; align-items: center; position: relative; background: #000; }
    .swiper-slide img { max-width: 100%; max-height: 100%; object-fit: contain; }
    #loader { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 24px; text-align: center; z-index: 10; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    #loader .spinner { display: inline-block; animation: spin 1.5s linear infinite; }
    /* ... resto de tu CSS igual ... */
  </style>
</head>

<body>
  <!-- üëá mantuve toda tu estructura igual -->
  <div class="swiper"><div class="swiper-wrapper"></div></div>
  <div id="loader"><span class="spinner">‚è≥</span></div>
  <div id="lblContador"></div>
  <div id="customAlertOverlay">
      <div class="custom-alert">
          <h2 id="alertTitle"></h2>
          <div class="titles-list" id="alertMessage"></div>
      </div>
  </div>
  <div class="content-overlay" id="contentOverlay">
    <h3 id="currentTitle"></h3>
    <p id="currentDescription"></p>
  </div>
  <div class="comments-overlay-container" id="commentsOverlay">
    <ul id="commentsList"></ul>
  </div>
  <div class="comments-counter" id="commentsCounter">
      <span class="icon">üí¨</span>
      <span class="count" id="commentCountValue">0</span>
  </div>
  
  <div class="comment-input-container">
      <input type="text" id="commentInput" placeholder="Escribe un comentario...">
      <button class="send-comment-btn"><i class="fas fa-paper-plane"></i></button>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    /* üëá mantuve toda tu l√≥gica igual, solo cambi√© la parte del teclado */

    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwyY6m3H8WD494cnoQbNXwspsZtD1sGu97yio9mk9DTozGSuyo6gHXB1W6HArcpYfP2/exec";
    let anunciosData = [];
    let swiperInstance = null;
    let contadorTotalAnterior = -1;
    let contadorAcumulado = 0;
    let nuevosTitulos = []; 
    const loader = document.getElementById('loader');
    const lblContador = document.getElementById("lblContador");

    const contentOverlay = document.getElementById('contentOverlay');
    const commentsOverlay = document.getElementById('commentsOverlay');
    const commentsCounter = document.getElementById('commentsCounter');
    const commentCountValue = document.getElementById('commentCountValue');
    const commentsList = document.getElementById('commentsList');
    const currentTitle = document.getElementById('currentTitle');
    const currentDescription = document.getElementById('currentDescription');
    const commentInputContainer = document.querySelector('.comment-input-container');
    const commentInput = document.getElementById('commentInput');
    const sendCommentBtn = document.querySelector('.send-comment-btn');

    /* ... resto de tu JS intacto ... */

    // üîπ Nuevo ajuste al teclado con visualViewport (reemplaza tu focusin/focusout)
    if (window.visualViewport) {
      const vv = window.visualViewport;

      function ajustarAlTeclado() {
        const keyboardHeight = window.innerHeight - vv.height;
        if (keyboardHeight > 0) {
          // teclado abierto
          const containerHeight = commentInputContainer.offsetHeight;
          commentInputContainer.style.bottom = `${keyboardHeight}px`;
          commentsOverlay.style.bottom = `${keyboardHeight + containerHeight + 10}px`;
          commentsCounter.style.bottom = `${keyboardHeight + containerHeight + 10}px`;
        } else {
          // teclado cerrado
          commentInputContainer.style.bottom = `0px`;
          commentsOverlay.style.bottom = `60px`;
          commentsCounter.style.bottom = `60px`;
        }
      }

      vv.addEventListener("resize", ajustarAlTeclado);
      vv.addEventListener("scroll", ajustarAlTeclado);
    }

    /* ... resto de tu JS igual (cargarImagenes, updateContentOverlay, initSwiper, etc.) ... */
  </script>
</body>
</html>
